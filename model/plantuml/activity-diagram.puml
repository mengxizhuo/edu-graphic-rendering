@startuml 图形渲染系统-活动图

!theme plain
skinparam activityBackgroundColor #F8F9FA
skinparam activityBorderColor #DEE2E6
skinparam swimlaneBorderColor #DEE2E6

|用户|
start
:选择操作类型;

|系统|
if (创建图形?) then (是)
  :显示图形选项;
  
  |用户|
  :选择图形类型;
  :输入图形参数;
  
  |系统|
  :使用工厂模式创建图形;
  :使用命令模式添加图形;
  :通过观察者模式通知变更;
  
else if (移动图形?) then (是)
  :显示可移动的图形;
  
  |用户|
  :选择要移动的图形;
  :输入新位置;
  
  |系统|
  :使用命令模式移动图形;
  :通过观察者模式通知变更;
  
else if (删除图形?) then (是)
  :显示可删除的图形;
  
  |用户|
  :选择要删除的图形;
  
  |系统|
  :使用命令模式删除图形;
  :通过观察者模式通知变更;
  
else if (撤销/重做?) then (是)
  |用户|
  if (撤销?) then (是)
    |系统|
    :使用命令模式撤销上一操作;
  else (否)
    |系统|
    :使用命令模式重做上一操作;
  endif
  :通过观察者模式通知变更;
  
else if (切换渲染器?) then (是)
  :显示可用渲染器;
  
  |用户|
  :选择渲染器类型;
  
  |系统|
  :使用抽象工厂创建渲染器;
  :使用桥接模式切换渲染器;
  
else if (导出数据?) then (是)
  :显示导出选项;
  
  |用户|
  :选择导出格式;
  
  |系统|
  :使用访问者模式导出数据;
  :返回导出结果;
  
  |用户|
  :保存导出数据;
  
else if (使用远程渲染?) then (是)
  |系统|
  :使用代理模式连接远程服务;
  if (连接成功?) then (是)
    :使用远程渲染器;
  else (否)
    :显示连接错误;
  endif
  
else (配置系统)
  :显示配置选项;
  
  |用户|
  :修改配置参数;
  
  |系统|
  :使用单例模式更新配置;
endif

|系统|
:渲染当前场景;

|用户|
:查看渲染结果;

if (继续操作?) then (是)
  :选择下一操作;
  goto 选择操作类型;
else (否)
  :退出系统;
endif

stop

@enduml 